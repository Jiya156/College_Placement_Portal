{% extends 'base.html' %}
{% load static %}

{% block title %}Company Dashboard{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'company_dashboard.css' %}">
{% endblock %}

{% block content %}
<div class="container company-dashboard">

  <h3>Welcome, {{ user.first_name }}</h3>

  <a href="{% url 'post_job' %}" class="post-job-btn mb-3 d-inline-block">
    Post New Job
  </a>

  <h5>Your Job Listings</h5>

  <div class="company-table">
    <table class="table mb-0">
      <thead>
        <tr>
          <th>Title</th>
          <th>Package</th>
          <th>Status</th>
          <th>Applicants</th>
          <th>Action</th>
        </tr>
      </thead>

      <tbody>
        {% for job in jobs %}
        <tr>
          <td>{{ job.title }}</td>
          <td>{{ job.package }}</td>
          <td>{{ job.status }}</td>
          <td>
            <a href="{% url 'view_applicants' job.id %}" class="view-btn">
              View
            </a>
          </td>
          <td>
            <form method="POST" action="{% url 'delete_job' job.id %}" style="display:inline;"
              onsubmit="return confirm('Are you sure you want to delete this job? This action cannot be undone.');">
              {% csrf_token %}
              <button type="submit" class="btn btn-sm btn-danger">
                Delete
              </button>
            </form>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="5">No job postings yet.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

</div>

{% endblock %}